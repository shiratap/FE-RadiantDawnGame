{"ast":null,"code":"'use strict';\n\nmodule.exports = (index, state) => {\n  // alert(state.characters[index].name + ' is fighting the enemy');\n  let player = state.characters[index].startingStats;\n  let enemy = state.enemies[0].startingStats;\n\n  if (enemy.def > player.att || enemy.res > player.mag) {\n    return;\n  } else {\n    let att = checkDifference(player.att, enemy.def);\n    let mag = checkDifference(player.mag, enemy.res);\n\n    if (player.speed > enemy.speed + 5) {\n      enemy.hp -= 2 * (att + mag);\n    } else {\n      enemy.hp -= att + mag;\n    }\n  }\n\n  if (enemy.hp <= 0) {\n    state.enemies.splice(0, 1);\n    return state;\n  }\n\n  turn(enemy, player);\n\n  if (player.hp <= 0) {\n    state.characters.splice(index, 1);\n  }\n\n  return state;\n};\n\nlet checkDifference = (stat1, stat2) => {\n  if (stat1 > stat2) {\n    return stat1 - stat2;\n  }\n\n  return 0;\n};","map":{"version":3,"sources":["/Users/Spencer/Documents/code/absoluteV2/src/fight.js"],"names":["module","exports","index","state","player","characters","startingStats","enemy","enemies","def","att","res","mag","checkDifference","speed","hp","splice","turn","stat1","stat2"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,OAAP,GAAiB,CAACC,KAAD,EAAQC,KAAR,KAAkB;AACjC;AAEA,MAAIC,MAAM,GAAGD,KAAK,CAACE,UAAN,CAAiBH,KAAjB,EAAwBI,aAArC;AACA,MAAIC,KAAK,GAAGJ,KAAK,CAACK,OAAN,CAAc,CAAd,EAAiBF,aAA7B;;AAEA,MAAIC,KAAK,CAACE,GAAN,GAAYL,MAAM,CAACM,GAAnB,IAA0BH,KAAK,CAACI,GAAN,GAAYP,MAAM,CAACQ,GAAjD,EAAsD;AACpD;AACD,GAFD,MAEO;AACL,QAAIF,GAAG,GAAGG,eAAe,CAACT,MAAM,CAACM,GAAR,EAAaH,KAAK,CAACE,GAAnB,CAAzB;AACA,QAAIG,GAAG,GAAGC,eAAe,CAACT,MAAM,CAACQ,GAAR,EAAaL,KAAK,CAACI,GAAnB,CAAzB;;AACA,QAAIP,MAAM,CAACU,KAAP,GAAeP,KAAK,CAACO,KAAN,GAAc,CAAjC,EAAoC;AAClCP,MAAAA,KAAK,CAACQ,EAAN,IAAY,KAAKL,GAAG,GAAGE,GAAX,CAAZ;AACD,KAFD,MAEO;AACLL,MAAAA,KAAK,CAACQ,EAAN,IAAYL,GAAG,GAAGE,GAAlB;AACD;AACF;;AAED,MAAIL,KAAK,CAACQ,EAAN,IAAY,CAAhB,EAAmB;AACjBZ,IAAAA,KAAK,CAACK,OAAN,CAAcQ,MAAd,CAAqB,CAArB,EAAwB,CAAxB;AACA,WAAOb,KAAP;AACD;;AACDc,EAAAA,IAAI,CAACV,KAAD,EAAQH,MAAR,CAAJ;;AACA,MAAIA,MAAM,CAACW,EAAP,IAAa,CAAjB,EAAoB;AAClBZ,IAAAA,KAAK,CAACE,UAAN,CAAiBW,MAAjB,CAAwBd,KAAxB,EAA+B,CAA/B;AACD;;AAED,SAAOC,KAAP;AACD,CA5BD;;AA8BA,IAAIU,eAAe,GAAG,CAACK,KAAD,EAAQC,KAAR,KAAkB;AACtC,MAAID,KAAK,GAAGC,KAAZ,EAAmB;AACjB,WAAOD,KAAK,GAAGC,KAAf;AACD;;AACD,SAAO,CAAP;AACD,CALD","sourcesContent":["'use strict';\n\nmodule.exports = (index, state) => {\n  // alert(state.characters[index].name + ' is fighting the enemy');\n\n  let player = state.characters[index].startingStats;\n  let enemy = state.enemies[0].startingStats;\n\n  if (enemy.def > player.att || enemy.res > player.mag) {\n    return;\n  } else {\n    let att = checkDifference(player.att, enemy.def);\n    let mag = checkDifference(player.mag, enemy.res);\n    if (player.speed > enemy.speed + 5) {\n      enemy.hp -= 2 * (att + mag);\n    } else {\n      enemy.hp -= att + mag;\n    }\n  }\n\n  if (enemy.hp <= 0) {\n    state.enemies.splice(0, 1);\n    return state;\n  }\n  turn(enemy, player);\n  if (player.hp <= 0) {\n    state.characters.splice(index, 1);\n  }\n\n  return state;\n};\n\nlet checkDifference = (stat1, stat2) => {\n  if (stat1 > stat2) {\n    return stat1 - stat2;\n  }\n  return 0;\n};\n"]},"metadata":{},"sourceType":"module"}